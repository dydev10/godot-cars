[gd_scene load_steps=17 format=3 uid="uid://dv6qsodls05xw"]

[ext_resource type="Script" uid="uid://c40uo7qdgdow5" path="res://raycast_car.gd" id="1_eavqw"]
[ext_resource type="Curve" uid="uid://bwk078n15nb8g" path="res://engine_power.tres" id="2_s7wxa"]
[ext_resource type="PackedScene" uid="uid://c8tcy4shfx6hc" path="res://models/sedan/sedan-sports.glb" id="3_4kvyf"]
[ext_resource type="Script" uid="uid://d2f3fjqki34tb" path="res://raycast_wheel.gd" id="4_11bne"]
[ext_resource type="Curve" uid="uid://iu50vlr3f1vg" path="res://tire_grip_FRONT.tres" id="5_6u4rh"]
[ext_resource type="PackedScene" uid="uid://cthyqj8qpxyn" path="res://models/sedan/wheel-default.glb" id="6_skqmy"]
[ext_resource type="Curve" uid="uid://cl73eam4mkvmj" path="res://tire_grip_BACK.tres" id="7_wkqqe"]
[ext_resource type="Script" uid="uid://bdrotyn6hyp38" path="res://car_follow_camera.gd" id="8_l5ige"]
[ext_resource type="PackedScene" uid="uid://dq1n1v4axkftr" path="res://models/mustang/mustang-frame.glb" id="9_wvtnc"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_dg77c"]
friction = 0.2

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_efxa6"]
points = PackedVector3Array(0.65, 0.24996082, 1.1249853, 0.6206049, 0.24996082, 1.1956245, 0.65, 0.049936373, 1.1249853, 0.65, 0.42571455, 0.96074283, 0.5499804, 0.24996082, 1.2248286, 0.6206049, 0.049936373, 1.1956245, 0.5499804, 0.4499853, 1.1749068, 0.12496084, 0, 1.275, 0.65, 0.049936373, -1.1252348, 0.65, 0.4877398, 0.8798698, 0.12496084, 0.17491679, 1.275, 0.17497063, 0.12498041, 1.275, 0.5499804, 0.049936373, 1.2248286, -0.55010766, 0.4499853, 1.1749068, 0.5499804, 0.5999804, 0.9247993, 0.17497063, 0.049936373, 1.275, -0.1250881, 0, 1.275, 0.12496084, 0, -1.275, 0.6206049, 0.049936373, -1.1958741, 0.65, 0.24996082, -1.1252348, 0.65, 0.5267032, 0.78576744, -0.1250881, 0.17491679, 1.275, -0.6207322, 0.24996082, 1.1956245, -0.55010766, 0.24996082, 1.2248286, -0.55010766, 0.5999804, 0.9247993, -0.65, 0.4877398, 0.8798698, -0.65, 0.42571455, 0.96074283, 0.65, 0.64991677, 0.44779754, 0.44996083, 0.9499999, 0.17497551, -0.17509788, 0.049936373, 1.275, -0.55010766, 0.049936373, 1.2248286, -0.6207322, 0.049936373, 1.1956245, -0.65, 0.049936373, 1.1249853, -0.1250881, 0, -1.275, 0.17497063, 0.049936373, -1.275, 0.5499804, 0.049936373, -1.2250783, 0.6206049, 0.24996082, -1.1958741, 0.5499804, 0.4499853, -1.2250783, 0.65, 0.42571455, -0.91082126, -0.17509788, 0.12498041, 1.275, -0.65, 0.24996082, 1.1249853, -0.65, 0.64991677, 0.44779754, -0.65, 0.5267032, 0.78576744, -0.45008808, 0.9499999, 0.17497551, 0.65, 0.64991677, 0.34770453, 0.44996083, 0.9499999, -0.52517617, -0.65, 0.049936373, -1.1252348, -0.6207322, 0.049936373, -1.1958741, -0.55010766, 0.049936373, -1.2250783, -0.17509788, 0.049936373, -1.275, 0.17497063, 0.12498041, -1.275, 0.12496084, 0.17491679, -1.275, -0.55010766, 0.4499853, -1.2250783, 0.5499804, 0.64991677, -0.82520556, 0.65, 0.4877398, -0.8301977, -0.65, 0.64991677, 0.34770453, -0.45008808, 0.9499999, -0.52517617, 0.65, 0.53990793, -0.6350039, 0.65, 0.5267032, -0.7360953, -0.65, 0.24996082, -1.1252348, -0.6207322, 0.24996082, -1.1958741, -0.17509788, 0.12498041, -1.275, -0.1250881, 0.17491679, -1.275, -0.65, 0.42571455, -0.91082126, -0.65, 0.4877398, -0.8301977, -0.55010766, 0.64991677, -0.82520556, -0.65, 0.53990793, -0.6350039, -0.65, 0.5267032, -0.7360953)

[sub_resource type="Gradient" id="Gradient_272bh"]
colors = PackedColorArray(0, 0, 0, 1, 0, 0, 0, 0.392157)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_5vw27"]
gradient = SubResource("Gradient_272bh")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_272bh"]
gravity = Vector3(0, 0, 0)
color_ramp = SubResource("GradientTexture1D_5vw27")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_272bh"]
transparency = 1
vertex_color_use_as_albedo = true

[sub_resource type="QuadMesh" id="QuadMesh_5vw27"]
material = SubResource("StandardMaterial3D_272bh")
size = Vector2(0.6, 1)
orientation = 1

[node name="Car" type="RigidBody3D" node_paths=PackedStringArray("wheels", "skidMarks")]
mass = 50.0
physics_material_override = SubResource("PhysicsMaterial_dg77c")
linear_damp_mode = 1
script = ExtResource("1_eavqw")
wheels = [NodePath("WheelFL"), NodePath("WheelFR"), NodePath("WheelRL"), NodePath("WheelRR")]
powerCurve = ExtResource("2_s7wxa")
skidMarks = [NodePath("SkidMarks/GPUParticles3D"), NodePath("SkidMarks/GPUParticles3D2"), NodePath("SkidMarks/GPUParticles3D3"), NodePath("SkidMarks/GPUParticles3D4")]
showDebug = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(-1.6, 0, 2.4159328e-07, 0, 1.6, 0, -2.4159328e-07, 0, -1.6, -6.039832e-09, -0.68278223, 0.040000003)
shape = SubResource("ConvexPolygonShape3D_efxa6")

[node name="sedan-sports" parent="." instance=ExtResource("3_4kvyf")]
transform = Transform3D(-1.6, 0, 2.4159328e-07, 0, 1.6, 0, -2.4159328e-07, 0, -1.6, 0, -1, 0)

[node name="WheelFL" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.8, -0.55, -1.05)
enabled = false
script = ExtResource("4_11bne")
springStrengh = 5000
springDamping = 120.0
restDist = 0.1
wheelRadius = 0.48
overExtend = 0.1
isSteer = true
gripCurve = ExtResource("5_6u4rh")
showDebug = true

[node name="wheel-default" parent="WheelFL" instance=ExtResource("6_skqmy")]
transform = Transform3D(-1.6, 0, -1.3987645e-07, 0, 1.6, 0, 1.3987645e-07, 0, -1.6, 0, 0, 0)

[node name="WheelFR" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.8, -0.55, -1.05)
enabled = false
script = ExtResource("4_11bne")
springStrengh = 5000
springDamping = 120.0
restDist = 0.1
wheelRadius = 0.48
overExtend = 0.1
isSteer = true
gripCurve = ExtResource("5_6u4rh")
showDebug = true

[node name="wheel-default2" parent="WheelFR" instance=ExtResource("6_skqmy")]
transform = Transform3D(1.6, 0, 0, 0, 1.6, 0, 0, 0, 1.6, 0, 0, 0)

[node name="WheelRL" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.8, -0.55, 1.05)
enabled = false
script = ExtResource("4_11bne")
springStrengh = 5000
springDamping = 120.0
restDist = 0.1
wheelRadius = 0.48
overExtend = 0.1
isMotor = true
gripCurve = ExtResource("7_wkqqe")
showDebug = true

[node name="wheel-default3" parent="WheelRL" instance=ExtResource("6_skqmy")]
transform = Transform3D(-1.6, 0, -1.3987645e-07, 0, 1.6, 0, 1.3987645e-07, 0, -1.6, 0, 0, 0)

[node name="WheelRR" type="RayCast3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.8, -0.55, 1.05)
enabled = false
script = ExtResource("4_11bne")
springStrengh = 5000
springDamping = 120.0
restDist = 0.1
wheelRadius = 0.48
overExtend = 0.1
isMotor = true
gripCurve = ExtResource("7_wkqqe")
showDebug = true

[node name="wheel-default4" parent="WheelRR" instance=ExtResource("6_skqmy")]
transform = Transform3D(1.6, 0, 0, 0, 1.6, 0, 0, 0, 1.6, 0, 0, 0)

[node name="SkidMarks" type="Node3D" parent="."]

[node name="GPUParticles3D" type="GPUParticles3D" parent="SkidMarks"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.1, 0, 0)
emitting = false
amount = 150
lifetime = 1.5
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_272bh")
draw_pass_1 = SubResource("QuadMesh_5vw27")

[node name="GPUParticles3D2" type="GPUParticles3D" parent="SkidMarks"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.1, 0, 0)
emitting = false
amount = 150
lifetime = 1.5
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_272bh")
draw_pass_1 = SubResource("QuadMesh_5vw27")

[node name="GPUParticles3D3" type="GPUParticles3D" parent="SkidMarks"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.1, 0, 0)
emitting = false
amount = 150
lifetime = 1.5
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_272bh")
draw_pass_1 = SubResource("QuadMesh_5vw27")

[node name="GPUParticles3D4" type="GPUParticles3D" parent="SkidMarks"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.1, 0, 0)
emitting = false
amount = 150
lifetime = 1.5
fixed_fps = 60
process_material = SubResource("ParticleProcessMaterial_272bh")
draw_pass_1 = SubResource("QuadMesh_5vw27")

[node name="CameraPivot" type="Node3D" parent="."]

[node name="Camera3D" type="Camera3D" parent="CameraPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 4)
top_level = true
current = true
script = ExtResource("8_l5ige")

[node name="mustang-frame" parent="." instance=ExtResource("9_wvtnc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, -1, 0)
